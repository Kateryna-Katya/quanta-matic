{"version":3,"file":"main-D_iLrT8x.js","sources":["../../src/main.js"],"sourcesContent":["/**\n * Quanta-Matic | Core JavaScript 2026\n * Стек: GSAP, ScrollTrigger, SplitType, Swiper, Lucide\n */\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\n  // --- 1. ФИКС: Устранение ошибки \"No checkout popup config found\" ---\n  // Создаем заглушку для внешних скриптов, чтобы избежать ошибок в консоли\n  window.checkoutConfig = window.checkoutConfig || {};\n  window.checkoutPopup = window.checkoutPopup || { config: {} };\n\n  // --- 2. ИНИЦИАЛИЗАЦИЯ ИКОНОК ---\n  if (typeof lucide !== 'undefined') {\n      lucide.createIcons();\n  }\n\n  // --- 3. РЕГИСТРАЦИЯ GSAP ПЛАГИНОВ ---\n  gsap.registerPlugin(ScrollTrigger);\n\n  // --- 4. МОБИЛЬНОЕ МЕНЮ (OVERLAY) ---\n  const burger = document.getElementById('burger');\n  const mobileMenu = document.getElementById('mobile-menu');\n  const menuLinks = document.querySelectorAll('.mobile-menu__link');\n\n  const toggleMenu = () => {\n      if (!burger || !mobileMenu) return;\n      burger.classList.toggle('burger--active');\n      mobileMenu.classList.toggle('mobile-menu--active');\n      // Блокируем скролл основной страницы при открытом меню\n      document.body.style.overflow = mobileMenu.classList.contains('mobile-menu--active') ? 'hidden' : '';\n  };\n\n  if (burger) burger.addEventListener('click', toggleMenu);\n\n  menuLinks.forEach(link => {\n      link.addEventListener('click', () => {\n          if (mobileMenu && mobileMenu.classList.contains('mobile-menu--active')) toggleMenu();\n      });\n  });\n\n  // --- 5. АНИМАЦИЯ HERO (SplitType + GSAP) ---\n  const heroTitle = document.querySelector('.js-hero-title');\n  if (heroTitle) {\n      const split = new SplitType(heroTitle, { types: 'lines, words' });\n      gsap.set(heroTitle, { visibility: 'visible' });\n\n      const tlHero = gsap.timeline({ defaults: { ease: 'power4.out' } });\n      tlHero\n          .to('.js-hero-badge', { opacity: 1, y: 0, duration: 0.8, delay: 0.2 })\n          .from(split.words, {\n              opacity: 0,\n              y: 50,\n              rotateX: -20,\n              stagger: 0.05,\n              duration: 0.8\n          }, '-=0.4')\n          .to('.js-hero-subtitle', { opacity: 1, y: 0, duration: 0.8 }, '-=0.6')\n          .to('.js-hero-actions', { opacity: 1, y: 0, duration: 0.8 }, '-=0.6');\n\n      // Параллакс эффект для цифровой сетки в фоне\n      gsap.to('.hero__abstract', {\n          scrollTrigger: {\n              trigger: '#hero',\n              start: 'top top',\n              end: 'bottom top',\n              scrub: true\n          },\n          y: 200,\n          rotateX: 75\n      });\n  }\n\n  // --- 6. АДАПТИВНЫЙ SWIPER (ИННОВАЦИИ) ---\n  // На мобильных слайдер уничтожается, чтобы карточки шли столбиком (CSS control)\n  let innovationSwiper;\n\n  function handleSwiper() {\n      const sliderContainer = document.querySelector('.innovationSwiper');\n      if (!sliderContainer) return;\n\n      if (window.innerWidth >= 768) {\n          // Инициализация для десктопа\n          if (!innovationSwiper) {\n              innovationSwiper = new Swiper('.innovationSwiper', {\n                  slidesPerView: 2,\n                  spaceBetween: 20,\n                  loop: true,\n                  navigation: {\n                      nextEl: '.next',\n                      prevEl: '.prev',\n                  },\n              });\n          }\n      } else {\n          // Полное уничтожение для мобильных (очистка инлайновых стилей Swiper)\n          if (innovationSwiper) {\n              innovationSwiper.destroy(true, true);\n              innovationSwiper = undefined;\n          }\n      }\n  }\n\n  handleSwiper();\n  window.addEventListener('resize', handleSwiper);\n\n  // --- 7. УНИВЕРСАЛЬНАЯ АНИМАЦИЯ ПРИ СКРОЛЛЕ (REVEAL) ---\n  const revealElements = document.querySelectorAll('.js-reveal');\n  revealElements.forEach((el) => {\n      gsap.from(el, {\n          scrollTrigger: {\n              trigger: el,\n              start: 'top 88%',\n              toggleActions: 'play none none none'\n          },\n          opacity: 0,\n          y: 40,\n          duration: 1,\n          ease: 'power3.out'\n      });\n  });\n\n  // --- 8. ФОРМА КОНТАКТОВ + КАПЧА ---\n  const contactForm = document.getElementById('contact-form');\n  if (contactForm) {\n      const phoneInput = document.getElementById('phone');\n      const captchaLabel = document.getElementById('captcha-question');\n      const captchaInput = document.getElementById('captcha-answer');\n\n      // Генерация математического примера\n      let n1 = Math.floor(Math.random() * 10) + 1;\n      let n2 = Math.floor(Math.random() * 10) + 1;\n      let sum = n1 + n2;\n      if (captchaLabel) captchaLabel.innerText = `${n1} + ${n2}`;\n\n      // Валидация телефона (удаляем всё кроме цифр)\n      if (phoneInput) {\n          phoneInput.addEventListener('input', (e) => {\n              e.target.value = e.target.value.replace(/\\D/g, '');\n          });\n      }\n\n      // Сабмит формы\n      contactForm.addEventListener('submit', (e) => {\n          e.preventDefault();\n\n          if (parseInt(captchaInput.value) !== sum) {\n              alert('Неверный ответ капчи! Пожалуйста, решите пример.');\n              return;\n          }\n\n          const btn = contactForm.querySelector('.form__submit');\n          btn.innerHTML = 'Отправка данных...';\n          btn.disabled = true;\n\n          // Симуляция AJAX запроса\n          setTimeout(() => {\n              gsap.to(contactForm, {\n                  opacity: 0,\n                  y: -20,\n                  duration: 0.5,\n                  onComplete: () => {\n                      contactForm.style.display = 'none';\n                      const success = document.getElementById('success-message');\n                      if (success) {\n                          success.style.display = 'flex';\n                          gsap.from(success, { opacity: 0, y: 20, duration: 0.5 });\n                      }\n                  }\n              });\n          }, 1500);\n      });\n  }\n\n  // --- 9. COOKIE POPUP ---\n  const cookiePopup = document.getElementById('cookie-popup');\n  const cookieBtn = document.getElementById('cookie-accept');\n\n  if (cookiePopup && !localStorage.getItem('quanta_cookies_accepted')) {\n      setTimeout(() => {\n          cookiePopup.classList.add('cookie-popup--active');\n      }, 3000); // Показываем через 3 секунды\n  }\n\n  if (cookieBtn) {\n      cookieBtn.addEventListener('click', () => {\n          localStorage.setItem('quanta_cookies_accepted', 'true');\n          cookiePopup.classList.remove('cookie-popup--active');\n      });\n  }\n\n  // --- 10. ЭФФЕКТ СКРОЛЛА ДЛЯ ХЕДЕРА ---\n  window.addEventListener('scroll', () => {\n      const header = document.querySelector('.header');\n      if (!header) return;\n\n      if (window.scrollY > 60) {\n          header.style.padding = '12px 0';\n          header.style.background = 'rgba(10, 10, 10, 0.98)';\n          header.style.borderBottom = '1px solid rgba(255, 77, 0, 0.4)';\n      } else {\n          header.style.padding = '20px 0';\n          header.style.background = 'rgba(10, 10, 10, 0.8)';\n          header.style.borderBottom = '1px solid rgba(255, 77, 0, 0.1)';\n      }\n  });\n});"],"names":["burger","mobileMenu","menuLinks","toggleMenu","link","heroTitle","split","innovationSwiper","handleSwiper","el","contactForm","phoneInput","captchaLabel","captchaInput","n1","n2","sum","e","btn","success","cookiePopup","cookieBtn","header"],"mappings":"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"}